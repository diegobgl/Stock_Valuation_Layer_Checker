<odoo>
    <!-- Vista Tree para Stock Valuation Layer -->
    <record id="view_stock_valuation_layer_tree" model="ir.ui.view">
        <field name="name">stock.valuation.layer.tree</field>
        <field name="model">stock.valuation.layer</field>
        <field name="inherit_id" ref="stock_account.view_stock_valuation_layer_tree"/>
        <field name="arch" type="xml">
            <tree>
                <field name="create_date"/>
                <field name="product_id"/>
                <field name="quantity"/>
                <field name="unit_cost"/>
                <field name="value"/>
                <field name="account_move_id"/>
            </tree>
        </field>
    </record>

    <!-- Asociar la acciÃ³n masiva con la vista -->
    <record id="action_server_create_accounting_entries" model="ir.actions.server">
        <field name="name">Crear Asientos Contables</field>
        <field name="model_id" ref="stock_account.model_stock_valuation_layer"/>
        <field name="binding_model_id" ref="stock_account.model_stock_valuation_layer"/>
        <field name="binding_type">action</field>
        <field name="state">code</field>
        <field name="code">
            for layer in records:
                layer.action_create_accounting_entries()
        </field>
    </record>
</odoo>
